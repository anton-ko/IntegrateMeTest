<div class="l-constrained">
  <%= content_tag :div, id: 'entrant_page', data: {
      competition: @entry.competition.to_json(only: %i[name requires_entry_name]),
      entry: @entry.to_json(only: %i[competition_id name email])
    } do %>

    <h1 class="page-title">{{competition.name}}</h1>

    <p>Enter your details to win!</p>

    <form name="entry">
      <div v-if="completed">
        <p>Thank you for entering our competition!</p>
      </div>
      <div v-else>
        <div id="error_explanation" v-if="Object.keys(field_errors).length > 0">
          Sorry, ther was a problem saving your entry:
          <ul>
            <li v-for="(error_messages, field) in field_errors">
              {{field}}:
              <span v-for="message in error_messages">{{message}}</span>
            </li>
          </ul>
        </div>

        <p v-if="competition.requires_entry_name">
          <label for="name">Name</label>
          <input id="name" name="name" v-model="entry.name">
        </p>

        <p>
          <label for="email">Email</label>
          <input id="email" name="email" v-model="entry.email">
        </p>

        <input type="submit" v-on:click.prevent="submit" value="Enter!">
      </div>
    </form>

  <% end %>
</div>
